(function(a,b){b.behaviors.batch={attach:function attach(c,d){var e=d.batch,f=a('[data-drupal-progress]').once('batch'),g;f.length&&(g=new b.ProgressBar('updateprogress',function updateCallback(j,k,l){'100'===j&&(l.stopMonitoring(),window.location=e.uri+'&op=finished')},'POST',function errorCallback(){f.prepend(a('<p class="error"></p>').html(e.errorMessage)),a('#wait').hide()}),g.setProgress(-1,e.initMessage),g.startMonitoring(e.uri+'&op=do',10),f.empty(),f.append(g.element))}}})(jQuery,Drupal);