(function(a,b,c){function d(f){this.$node=a(f),this.$node.data('details',this);var g=location.hash&&'#'!==location.hash?', '+location.hash:'';this.$node.find('.error'+g).length&&this.$node.attr('open',!0),this.setupSummary(),this.setupLegend()}a.extend(d,{instances:[]}),a.extend(d.prototype,{setupSummary:function setupSummary(){this.$summary=a('<span class="summary"></span>'),this.$node.on('summaryUpdated',a.proxy(this.onSummaryUpdated,this)).trigger('summaryUpdated')},setupLegend:function setupLegend(){var f=this.$node.find('> summary');a('<span class="details-summary-prefix visually-hidden"></span>').append(this.$node.attr('open')?c.t('Hide'):c.t('Show')).prependTo(f).after(document.createTextNode(' ')),a('<a class="details-title"></a>').attr('href','#'+this.$node.attr('id')).prepend(f.contents()).appendTo(f),f.append(this.$summary).on('click',a.proxy(this.onLegendClick,this))},onLegendClick:function onLegendClick(f){this.toggle(),f.preventDefault()},onSummaryUpdated:function onSummaryUpdated(){var f=a.trim(this.$node.drupalGetSummary());this.$summary.html(f?' ('+f+')':'')},toggle:function toggle(){var f=this,g=!!this.$node.attr('open'),h=this.$node.find('> summary span.details-summary-prefix');g?h.html(c.t('Show')):h.html(c.t('Hide')),setTimeout(function(){f.$node.attr('open',!g)},0)}}),c.behaviors.collapse={attach:function attach(f){if(!b.details){var g=a(f).find('details').once('collapse').addClass('collapse-processed');if(g.length)for(var h=0;h<g.length;h++)d.instances.push(new d(g[h]))}}},c.CollapsibleDetails=d})(jQuery,Modernizr,Drupal);